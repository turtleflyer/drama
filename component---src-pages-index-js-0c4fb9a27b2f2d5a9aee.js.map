{"version":3,"sources":["webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/examples/tic-tac-toe/node_modules/drama-core/src/drama-core.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/examples/tic-tac-toe/src/cell.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/examples/tic-tac-toe/src/matrix.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/examples/tic-tac-toe/src/messages.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/examples/tic-tac-toe/src/restartButton.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/examples/tic-tac-toe/src/tic-tac-toe.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/examples/tic-tac-toe/src/analyzePossibleWin.js","webpack:///./src/components/TicTacToe.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/examples/tic-tac-toe/src/stage.js","webpack:///./src/pages/index.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/node_modules/core-js/modules/_wks-define.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/node_modules/core-js/modules/_wks-ext.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/node_modules/core-js/modules/_object-gopn.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/node_modules/core-js/modules/es6.array.sort.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/node_modules/core-js/modules/_strict-method.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/node_modules/core-js/modules/es7.symbol.async-iterator.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/node_modules/core-js/modules/es6.symbol.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/node_modules/core-js/modules/_meta.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/node_modules/core-js/modules/_enum-keys.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/node_modules/core-js/modules/_object-gopn-ext.js","webpack:////mnt/c/Users/turtl/Documents/Code/drama_project/drama/node_modules/core-js/modules/_object-gopd.js"],"names":["EventsWork","[object Object]","this","eventsStore","Map","elementsMap","customEventTypes","Set","onAddElementActionsMap","exhaustTypesMap","routine","interpretTarget","t","propagationKey","Symbol","nullKey","parentKey","addElementEventType","registerEventType","RoleSet","invokeRoleSetClass","worker","fireFromQueueType","fireFromQueueId","queueData","countTypesInQueue","name","eventChain","roleSet","type","action","length","target","event","shift","fireEvent","countType","get","has","delete","set","Promise","resolve","then","getCallback","defineRoutine","bind","managePropagation","stopBubbling","stopPropagatingNested","setActionOnAddElement","waitWhenTypeExhausted","obj","key","create","toGet","map","deepMap","getSomeFromDeep","next","getFromDeepMap","defaultPropagation","Object","assign","add","option","stageCallback","ancestor","getAncestor","belong","mapOfTypes","entries","forEach","typeEntry","eventID","handle","grandAncestorEntry","applyDefaultPropagation","elementEntry","setOfTypes","addEventListener","parent","size","element","addCallbackToChildren","addCallback","types","collectedTypes","concat","keys","filter","parentEntry","combineTypes","parentClass","elements","super","e","args","addElement","deleteElement","promiseHandle","promise","invokePromiseHandle","toProcess","push","description","typeRegistered","checkIfTerminate","furtherDescription","getID","waitGroupEvent","arg","getType","cellStyle","border","width","height","position","display","background-color","markAsWinStyle","matrixContainer","document","createElement","buildMatrix","Cell","matrix","i","cell","appendChild","node","textMessageStyle","line-height","font-style","color","font-size","messageContainer","clearMessages","firstChild","removeChild","style","postTextMessage","str","message","createTextNode","window","setTimeout","restartButton","innerText","winMessages","turns","prototype","_Object$assign","commonStyle","left","top","margin","border-radius","first","second","transform","resetCell","o","markAsWin","gameMatrix","emptyCells","currentTurn","xAndOs","turn","filledCells","_ref","possibleWin","_arr","_i","winCells","_iterator","_isArray","Array","isArray","_i2","iterator","done","value","cellN","includes","analyzePossibleWin","indexOf","sort","a","b","keepState","clearElements","n","_ref2","setCell","onclick","addElements","TicTacToe","props","_this","_React$Component","call","myRef","React","createRef","componentDidMount","placeholder","stage","current","box-sizing","parentNode","replaceChild","render","react_default","ref","Component","IndexPage","TicTacToe_TicTacToe","global","__webpack_require__","core","LIBRARY","wksExt","defineProperty","f","module","exports","$Symbol","charAt","$keys","hiddenKeys","getOwnPropertyNames","O","$export","aFunction","toObject","fails","$sort","test","P","F","undefined","comparefn","method","DESCRIPTORS","redefine","META","KEY","$fails","shared","setToStringTag","uid","wks","wksDefine","enumKeys","anObject","isObject","toIObject","toPrimitive","createDesc","_create","gOPNExt","$GOPD","$DP","gOPD","dP","gOPN","$JSON","JSON","_stringify","stringify","HIDDEN","TO_PRIMITIVE","isEnum","propertyIsEnumerable","SymbolRegistry","AllSymbols","OPSymbols","ObjectProto","USE_NATIVE","QObject","setter","findChild","setSymbolDesc","it","D","protoDesc","wrap","tag","sym","_k","isSymbol","$defineProperty","enumerable","$defineProperties","l","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","names","result","$getOwnPropertySymbols","IS_OP","TypeError","arguments","$set","configurable","G","W","es6Symbols","split","j","wellKnownSymbols","store","k","S","for","keyFor","useSetter","useSimple","defineProperties","getOwnPropertyDescriptor","getOwnPropertySymbols","replacer","$replacer","apply","valueOf","Math","setDesc","id","isExtensible","FREEZE","preventExtensions","setMeta","w","meta","NEED","fastKey","getWeak","onFreeze","getKeys","gOPS","pIE","getSymbols","symbols","toString","windowNames","slice","getWindowNames","IE8_DOM_DEFINE"],"mappings":"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","file":"component---src-pages-index-js-0c4fb9a27b2f2d5a9aee.js","sourcesContent":["class EventsWork {\r\n  constructor() {\r\n    /**\r\n     *   eventsStore structure:\r\n     *  Map(\r\n     *    [roleSet, Map(\r\n     *      [type, Map(\r\n     *        [eventID, promiseHandle]\r\n     *      )]\r\n     *    )]\r\n     *  )\r\n     */\r\n    this.eventsStore = new Map();\r\n\r\n    /**\r\n     *  elementsMap structure:\r\n     *  Map(\r\n     *    [element, { roleSet, types: Set of types }]\r\n     *  )\r\n     *\r\n     */\r\n    this.elementsMap = new Map();\r\n    this.customEventTypes = new Set();\r\n    this.onAddElementActionsMap = new Map();\r\n    this.exhaustTypesMap = new Map();\r\n    this.routine = { interpretTarget: t => t };\r\n    this.propagationKey = Symbol('propagationKey');\r\n    this.nullKey = Symbol('@@eventswork/nullKey');\r\n    this.parentKey = Symbol('@@eventswork/parentKey');\r\n    this.addElementEventType = Symbol('@@addElement');\r\n    this.registerEventType(this.addElementEventType);\r\n    this.RoleSet = this.invokeRoleSetClass();\r\n    this.worker = new this.RoleSet([]);\r\n    this.fireFromQueueType = Symbol('@@eventswork/fireFromQueue');\r\n    this.fireFromQueueId = Symbol('@@eventswork/fireFromQueueId');\r\n    this.queueData = [];\r\n    this.countTypesInQueue = new Map();\r\n\r\n    this.worker.name = '@@worker';\r\n\r\n    this.eventChain(\r\n      {\r\n        roleSet: this.worker,\r\n        type: this.fireFromQueueType,\r\n        action: () => {\r\n          if (this.queueData.length > 0) {\r\n            const { target, type, event } = this.queueData.shift();\r\n            this.fireEvent(target, type, event);\r\n\r\n            // Look if waitWhenTypeExhausted for this type has been activated\r\n            const countType = this.countTypesInQueue.get(type) - 1;\r\n            if (countType === 0 && this.exhaustTypesMap.has(type)) {\r\n              // Fulfill the according promise sending the name of the type to it\r\n              this.exhaustTypesMap.get(type)(type);\r\n              this.exhaustTypesMap.delete(type);\r\n            }\r\n            this.countTypesInQueue.set(type, countType);\r\n\r\n            // Next call of fireEvent of fireFomQueueType is doing asynchronously to\r\n            // make a chance to\r\n            // fulfill the according promise and create the new one for\r\n            // the next target form the queue\r\n            // prettier-ignore\r\n            Promise.resolve().then(\r\n              () => this.getCallback(\r\n                { [this.nullKey]: true, [this.parentKey]: this.worker },\r\n                this.fireFromQueueType,\r\n              )(),\r\n            );\r\n          }\r\n        },\r\n      },\r\n      this.fireFromQueueId,\r\n    );\r\n\r\n    this.defineRoutine = this.defineRoutine.bind(this);\r\n    this.managePropagation = this.managePropagation.bind(this);\r\n    this.stopBubbling = this.stopBubbling.bind(this);\r\n    this.stopPropagatingNested = this.stopPropagatingNested.bind(this);\r\n    this.setActionOnAddElement = this.setActionOnAddElement.bind(this);\r\n    this.fireEvent = this.fireEvent.bind(this);\r\n    this.eventChain = this.eventChain.bind(this);\r\n    this.waitWhenTypeExhausted = this.waitWhenTypeExhausted.bind(this);\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @function\r\n   * @name whatToDo\r\n   * @returns {*}\r\n   */\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {Onject|Map} obj\r\n   * @param {*} key\r\n   * @param {whatToDo} create\r\n   * @returns\r\n   */\r\n  static getSomeFromDeep(obj, key, create) {\r\n    let toGet;\r\n    if (obj instanceof Map) {\r\n      toGet = obj.get(key);\r\n    } else {\r\n      toGet = obj[key];\r\n    }\r\n    if (!toGet) {\r\n      toGet = create();\r\n      if (obj instanceof Map) {\r\n        obj.set(key, toGet);\r\n      } else {\r\n        obj[key] = toGet;\r\n      }\r\n    }\r\n    return toGet;\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @typedef {Object} Returned\r\n   * @property {Map} map\r\n   * @property {getFromDeepMap.bind} next\r\n   */\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {Map} map\r\n   * @param {*} key\r\n   * @returns {Returned}\r\n   *\r\n   */\r\n  static getFromDeepMap(map, key) {\r\n    const deepMap = EventsWork.getSomeFromDeep(map, key, () => new Map());\r\n    return { map: deepMap, next: EventsWork.getFromDeepMap.bind(null, deepMap) };\r\n  }\r\n\r\n  defineRoutine({ interpretTarget, defaultPropagation }) {\r\n    Object.assign(this.routine, { interpretTarget, defaultPropagation });\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {*} type\r\n   * @memberof EventsWork\r\n   */\r\n  registerEventType(type) {\r\n    this.customEventTypes.add(type);\r\n  }\r\n\r\n  managePropagation(event, option) {\r\n    // eslint-disable-next-line\r\n    const { stopBubbling, stopPropagatingNested } = option;\r\n    if (!event[this.propagationKey]) {\r\n      event[this.propagationKey] = {};\r\n    }\r\n    Object.assign(event[this.propagationKey], {\r\n      // If stopBubbling is assigned true its value changes by empty set (still get true value)\r\n      stopBubbling: stopBubbling ? new Set() : null,\r\n      stopPropagatingNested,\r\n    });\r\n    return event;\r\n  }\r\n\r\n  stopBubbling(event = {}) {\r\n    this.managePropagation(event, { stopBubbling: true });\r\n    // eslint-disable-next-line\r\n    event.stopPropagatingNested = this.stopPropagatingNested.bind(null, event);\r\n    return event;\r\n  }\r\n\r\n  stopPropagatingNested(event = {}) {\r\n    this.managePropagation(event, { stopPropagatingNested: true });\r\n    event.stopBubbling = this.stopBubbling.bind(null, event);\r\n    return event;\r\n  }\r\n\r\n  applyDefaultPropagation(event) {\r\n    if (!event[this.propagationKey]) {\r\n      event[this.propagationKey] = {};\r\n      const { defaultPropagation } = this.routine;\r\n      if (defaultPropagation) {\r\n        this.managePropagation(event, defaultPropagation);\r\n      }\r\n    }\r\n    return event;\r\n  }\r\n\r\n  /**\r\n   * Function returns the callback to attach to event listener\r\n   *\r\n   * @param {EventsWork} context\r\n   * @param {Element} target\r\n   * @param {*} type\r\n   * @returns {callback}\r\n   */\r\n  getCallback(target, type) {\r\n    // eslint-disable-next-line\r\n    const stageCallback = (target, type, event, ancestor) => {\r\n      let getAncestor = ancestor;\r\n      if (!ancestor) {\r\n        getAncestor = target[this.parentKey] || this.elementsMap.get(target).belong;\r\n      }\r\n      const mapOfTypes = EventsWork.getFromDeepMap(this.eventsStore, getAncestor).map;\r\n      if (mapOfTypes.has(type)) {\r\n        [...mapOfTypes.get(type).entries()].forEach((typeEntry) => {\r\n          const [eventID, handle] = typeEntry;\r\n          handle({\r\n            target,\r\n            roleSet: target[this.parentKey] || this.elementsMap.get(target).belong,\r\n            type,\r\n            event,\r\n            eventID,\r\n          });\r\n        });\r\n      }\r\n      const grandAncestorEntry = this.elementsMap.get(getAncestor);\r\n      if (grandAncestorEntry) {\r\n        stageCallback(target, type, event, grandAncestorEntry.belong);\r\n      }\r\n    };\r\n\r\n    return (event = {}) => {\r\n      stageCallback(target, type, this.applyDefaultPropagation(event));\r\n    };\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {EventsWork} this\r\n   * @param {Element} target\r\n   * @param {string} type\r\n   */\r\n  addCallback(target, type) {\r\n    const elementEntry = this.elementsMap.get(target);\r\n    const setOfTypes = EventsWork.getSomeFromDeep(elementEntry, 'types', () => new Set());\r\n    if (!setOfTypes.has(type)) {\r\n      if (this.routine.interpretTarget(target)) {\r\n        this.routine.interpretTarget(target).addEventListener(type, this.getCallback(target, type));\r\n      }\r\n      setOfTypes.add(type);\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {UnitClass} parent\r\n   * @param {string} type\r\n   */\r\n  addCallbackToChildren(parent, type) {\r\n    if (parent.size > 0) {\r\n      const mapOfIDs = EventsWork.getFromDeepMap(this.eventsStore, parent).next(type).map;\r\n      if (mapOfIDs.size === 0) {\r\n        [...parent].forEach((element) => {\r\n          // eslint-disable-next-line\r\n          if (element instanceof this.RoleSet) {\r\n            this.addCallbackToChildren(element, type);\r\n          } else {\r\n            this.addCallback(element, type);\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Function returns the list of types of events the ancestors\r\n   * of the element have handles of whom.\r\n   *\r\n   * @param {EventsWork} context\r\n   * @param {RoleSet} roleSet\r\n   * @param {*[]} types\r\n   * @returns {*[]}\r\n   */\r\n  combineTypes(roleSet, types = []) {\r\n    let collectedTypes = types.concat(\r\n      [...EventsWork.getFromDeepMap(this.eventsStore, roleSet).map.keys()].filter(\r\n        type => typeof type === 'string',\r\n      ),\r\n    );\r\n    const parentEntry = this.elementsMap.get(roleSet);\r\n    if (parentEntry) {\r\n      collectedTypes = this.combineTypes(parentEntry.belong, collectedTypes);\r\n    }\r\n    return collectedTypes;\r\n  }\r\n\r\n  invokeRoleSetClass() {\r\n    const parentClass = this;\r\n\r\n    return class RoleSet extends Set {\r\n      /**\r\n       *Creates an instance of RoleSet.\r\n       * @param {Set|Array} list\r\n       */\r\n      constructor(elements) {\r\n        super(elements);\r\n        if (elements) {\r\n          elements.forEach((e) => {\r\n            parentClass.elementsMap.set(e, { belong: this });\r\n          });\r\n        }\r\n        parentClass.onAddElementActionsMap.set(this, () => {});\r\n        // eslint-disable-next-line\r\n        parentClass.eventChain(\r\n          {\r\n            roleSet: this,\r\n            type: parentClass.addElementEventType,\r\n            action: (...args) => {\r\n              parentClass.onAddElementActionsMap.get(this)(...args);\r\n            },\r\n          },\r\n          Symbol('@@elementAdded'),\r\n        );\r\n      }\r\n\r\n      /**\r\n       *\r\n       *\r\n       * @param {Element} element\r\n       */\r\n      addElement(element) {\r\n        if (this.has(element)) {\r\n          return this;\r\n        }\r\n        this.add(element);\r\n        // prettier-ignore\r\n        const elementEntry = EventsWork.getSomeFromDeep(\r\n          parentClass.elementsMap,\r\n          element,\r\n          () => (element instanceof RoleSet ? {} : { types: new Set() }),\r\n        );\r\n        if (elementEntry.belong) {\r\n          elementEntry.belong.delete(element);\r\n        }\r\n        elementEntry.belong = this;\r\n        const types = parentClass.combineTypes(this);\r\n        types.forEach((type) => {\r\n          if (element instanceof RoleSet) {\r\n            parentClass.addCallbackToChildren(element, type);\r\n          } else {\r\n            parentClass.addCallback(element, type);\r\n          }\r\n        });\r\n        // eslint-disable-next-line\r\n        parentClass.fireEvent(\r\n          new Set([element]),\r\n          parentClass.addElementEventType,\r\n          parentClass.managePropagation({}, { stopBubbling: true, stopPropagatingNested: true }),\r\n        );\r\n        return this;\r\n      }\r\n\r\n      deleteElement(element) {\r\n        this.delete(element);\r\n        parentClass.elementsMap.get(element).belong = null;\r\n        return this;\r\n      }\r\n\r\n      addElements(elements) {\r\n        elements.forEach(e => this.addElement(e));\r\n        return this;\r\n      }\r\n\r\n      clearElements() {\r\n        [...this].forEach(e => this.deleteElement(e));\r\n        return this;\r\n      }\r\n    };\r\n  }\r\n\r\n  setActionOnAddElement(roleSet, action) {\r\n    this.onAddElementActionsMap.set(roleSet, action);\r\n    return roleSet;\r\n  }\r\n\r\n  static invokePromiseHandle() {\r\n    let promiseHandle;\r\n    const promise = new Promise((resolve) => {\r\n      promiseHandle = resolve;\r\n    });\r\n    return { promise, promiseHandle };\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {UnitClass} roleSet\r\n   * @param {string} type\r\n   * @param {Symbol} eventID\r\n   * @returns\r\n   * @memberof EventsWork\r\n   */\r\n  waitGroupEvent(roleSet, type, eventID) {\r\n    const { promise, promiseHandle } = EventsWork.invokePromiseHandle();\r\n    if (typeof type === 'string') {\r\n      this.addCallbackToChildren(roleSet, type);\r\n    }\r\n    EventsWork.getFromDeepMap(this.eventsStore, roleSet)\r\n      .next(type)\r\n      .map.set(eventID, promiseHandle);\r\n    return promise;\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {(Element|UnitClass)} target\r\n   * @param {string} type\r\n   * @param {Object} _event\r\n   * @memberof EventsWork\r\n   */\r\n  fireEvent(target, type, event = {}) {\r\n    this.applyDefaultPropagation(event);\r\n    if (target instanceof Set) {\r\n      let toProcess;\r\n      if (target.size > 0) {\r\n        toProcess = [...target];\r\n      } else {\r\n        // If target is empty RoleSet the object with signal property is passing to callback\r\n        toProcess = [{ [this.nullKey]: true, [this.parentKey]: target }];\r\n      }\r\n      toProcess.forEach((e) => {\r\n        if (!(event[this.propagationKey].stopPropagatingNested && e instanceof this.RoleSet)) {\r\n          this.queueData.push({ target: e, type, event });\r\n          const countType = this.countTypesInQueue.get(type);\r\n          this.countTypesInQueue.set(type, countType ? countType + 1 : 1);\r\n        }\r\n      });\r\n      this.getCallback(\r\n        { [this.nullKey]: true, [this.parentKey]: this.worker },\r\n        this.fireFromQueueType,\r\n      )();\r\n    } else {\r\n      this.getCallback(target, type)(event);\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @typedef {Onject} DataToAction\r\n   * @property {Element} target\r\n   * @property {Object} event\r\n   * @property {Symbol} eventID\r\n   * @property {UnitClass} roleSet\r\n   * @property {string} type\r\n   */\r\n\r\n  /**\r\n   * @function\r\n   * @name ToDoIfFired\r\n   * @param {DataToAction} sendToAct\r\n   */\r\n\r\n  /**\r\n   * @function\r\n   * @name IfTerminate\r\n   * @param {DataToAction} analyzeIt\r\n   */\r\n\r\n  /**\r\n   * @typedef {Object} ChainInit\r\n   * @property {UnitClass|Set} roleSet\r\n   * @property {string} type\r\n   * @property {ToDoIfFired} action\r\n   * @property {?IfTerminate} checkIfTerminate\r\n   */\r\n\r\n  /**\r\n   * @param {ChainInit} description\r\n   * @param {?Symbol} eventID\r\n   * @returns {UnitClass}\r\n   * @memberof EventsWork\r\n   */\r\n  eventChain(description, eventID) {\r\n    const {\r\n      roleSet, type, action, typeRegistered,\r\n    } = description;\r\n    const checkIfTerminate = description.checkIfTerminate || (() => false);\r\n    const furtherDescription = { ...description, checkIfTerminate };\r\n    if (!(typeRegistered || typeof type === 'string' || this.customEventTypes.has(type))) {\r\n      this.registerEventType(type);\r\n      furtherDescription.typeRegistered = true;\r\n    }\r\n    let getID = eventID;\r\n    if (!eventID) {\r\n      getID = typeof type === 'string'\r\n        ? Symbol(`${type}-eventID`)\r\n        : Symbol(`${type.description}-eventID`);\r\n    }\r\n    this.waitGroupEvent(roleSet, type, getID).then((arg) => {\r\n      const { target, event } = arg;\r\n      // Check if target is subject of situation of preventing bubbling.\r\n      // In this case we check if target was already processing.\r\n      // So this is a criteria that further processing is a bubbling.\r\n      if (\r\n        event[this.propagationKey].stopBubbling\r\n        && event[this.propagationKey].stopBubbling.has(target)\r\n      ) {\r\n        this.eventChain(furtherDescription, getID);\r\n      } else if (checkIfTerminate(arg)) {\r\n        this.eventsStore\r\n          .get(roleSet)\r\n          .get(type)\r\n          .delete(getID);\r\n      } else {\r\n        action(arg);\r\n        if (event[this.propagationKey].stopBubbling) {\r\n          event[this.propagationKey].stopBubbling.add(target);\r\n        }\r\n        this.eventChain(furtherDescription, getID);\r\n      }\r\n    });\r\n    return eventID;\r\n  }\r\n\r\n  waitWhenTypeExhausted(type) {\r\n    let getType = type;\r\n    if (type === 'onAddElement') {\r\n      getType = this.addElementEventType;\r\n    }\r\n    if (this.countTypesInQueue.get(getType)) {\r\n      const { promise, promiseHandle } = EventsWork.invokePromiseHandle();\r\n      // Register the promise handle to exhaustTypesMap\r\n      this.exhaustTypesMap.set(getType, promiseHandle);\r\n      return promise;\r\n    }\r\n    return Promise.resolve();\r\n  }\r\n}\r\n\r\nconst {\r\n  RoleSet,\r\n  defineRoutine,\r\n  managePropagation,\r\n  stopBubbling,\r\n  stopPropagatingNested,\r\n  setActionOnAddElement,\r\n  fireEvent,\r\n  eventChain,\r\n  waitWhenTypeExhausted,\r\n} = new EventsWork();\r\n\r\nexport default EventsWork;\r\n\r\nexport {\r\n  RoleSet,\r\n  defineRoutine,\r\n  managePropagation,\r\n  stopBubbling,\r\n  stopPropagatingNested,\r\n  setActionOnAddElement,\r\n  fireEvent,\r\n  eventChain,\r\n  waitWhenTypeExhausted,\r\n};\r\n","/* eslint-env browser */\r\n\r\nconst cellStyle = {\r\n  border: '1px solid black',\r\n  width: '3em',\r\n  height: '3em',\r\n  position: 'relative',\r\n  display: 'inline-block',\r\n  'background-color': 'white',\r\n};\r\nconst markAsWinStyle = { 'background-color': 'Khaki' };\r\n\r\nexport function resetCell() {\r\n  while (this.node.firstChild) {\r\n    this.node.removeChild(this.node.firstChild);\r\n  }\r\n  Object.assign(this.node.style, cellStyle);\r\n  return this;\r\n}\r\n\r\nexport function markX() {\r\n  const commonStyle = {\r\n    position: 'absolute',\r\n    left: '-0.24em',\r\n    top: '1.24em',\r\n    width: '3em',\r\n    height: '0',\r\n    border: '0.3em solid RoyalBlue',\r\n    margin: '0',\r\n    'border-radius': '0.3em',\r\n  };\r\n  const first = document.createElement('div');\r\n  const second = document.createElement('div');\r\n  Object.assign(first.style, commonStyle, { transform: 'rotate(45deg)' });\r\n  Object.assign(second.style, commonStyle, { transform: 'rotate(135deg)' });\r\n  this.resetCell();\r\n  this.node.appendChild(first);\r\n  this.node.appendChild(second);\r\n  return this;\r\n}\r\n\r\nexport function markO() {\r\n  const o = document.createElement('div');\r\n  const oStyle = {\r\n    position: 'absolute',\r\n    left: '0.15em',\r\n    top: '0.15em',\r\n    width: '1.5em',\r\n    height: '1.5em',\r\n    border: '0.6em solid Red',\r\n    margin: '0',\r\n    'border-radius': '2.1em',\r\n  };\r\n  Object.assign(o.style, oStyle);\r\n  this.resetCell();\r\n  this.node.appendChild(o);\r\n  return this;\r\n}\r\n\r\nexport function markAsWin() {\r\n  Object.assign(this.node.style, markAsWinStyle);\r\n}\r\n\r\nexport function createCell() {\r\n  const cell = document.createElement('div');\r\n  Object.assign(cell.style, cellStyle);\r\n  return cell;\r\n}\r\n","/* eslint-env browser */\r\n\r\nexport const matrixContainer = document.createElement('div');\r\n\r\nfunction buildMatrix(Cell) {\r\n  const matrix = [];\r\n\r\n  for (let i = 0; i < 9; i++) {\r\n    const cell = new Cell();\r\n    matrixContainer.appendChild(cell.node);\r\n    matrix.push(cell);\r\n    if ((i + 1) % 3 === 0) {\r\n      matrixContainer.appendChild(document.createElement('br'));\r\n    }\r\n  }\r\n\r\n  return matrix;\r\n}\r\n\r\nexport default buildMatrix;\r\n","/* eslint-env browser */\r\nconst messageContainerStyle = {\r\n  height: '3em',\r\n};\r\n\r\nconst textMessageStyle = {\r\n  'line-height': '2em',\r\n  'font-style': 'italic',\r\n  color: 'Red',\r\n  'font-size': '1.5em',\r\n};\r\n\r\nexport const messageContainer = document.createElement('div');\r\nObject.assign(messageContainer.style, messageContainerStyle);\r\n\r\nfunction clearMessages() {\r\n  while (messageContainer.firstChild) {\r\n    messageContainer.removeChild(messageContainer.firstChild);\r\n  }\r\n}\r\n\r\nfunction postTextMessage(str) {\r\n  const message = document.createElement('div');\r\n  message.appendChild(document.createTextNode(str));\r\n  Object.assign(message.style, textMessageStyle);\r\n  clearMessages();\r\n  messageContainer.appendChild(message);\r\n  window.setTimeout(clearMessages, 1500);\r\n}\r\n\r\nexport default postTextMessage;\r\n","/* eslint-env browser */\r\n\r\nconst buttonStyle = {\r\n  width: '7em',\r\n  height: '2em',\r\n};\r\nconst restartButton = document.createElement('button');\r\nrestartButton.innerText = 'Restart';\r\nObject.assign(restartButton.style, buttonStyle);\r\n\r\nexport default restartButton;\r\n","/* eslint-env browser */\r\nimport {\r\n  RoleSet, eventChain, setActionOnAddElement, defineRoutine,\r\n} from 'drama-core';\r\nimport {\r\n  createCell, resetCell, markX, markO, markAsWin,\r\n} from './cell';\r\nimport buildMatrix from './matrix';\r\nimport postTextMessage from './messages';\r\nimport analyzePossibleWin from './analyzePossibleWin';\r\nimport restartButton from './restartButton';\r\n\r\n// Define the class of cells that the board of tic-tac-toe game consists of\r\nclass Cell {\r\n  constructor() {\r\n    this.node = createCell();\r\n  }\r\n}\r\n\r\n// interpretTarget property of the parameter passed to\r\n// defineRoutine defines the way to reach the DOM element of\r\n// event targets\r\ndefineRoutine({ interpretTarget: e => e.node });\r\n\r\n// Define the messages strings\r\nconst cellMarkedMessage = 'The cell is already set';\r\nconst gameOverMessage = 'Game is over';\r\nconst winMessages = ['X won', 'O won'];\r\n\r\n// Define the names of methods that mark cells as X and O\r\nconst turns = ['markX', 'markO'];\r\n\r\n// Add methods to the Cell class that mark a cell as X and\r\n// O, method that marks a cell as a part of a wining line,\r\n// and one that resets a cell to the empty state\r\nObject.assign(Cell.prototype, {\r\n  [turns[0]]: markX,\r\n  [turns[1]]: markO,\r\n  markAsWin,\r\n  resetCell,\r\n});\r\n\r\n// Build the board of the game\r\nconst gameMatrix = buildMatrix(Cell);\r\n\r\n// Define the RoleSet containing empty cells (in the\r\n// beginning of the game all cells are empty)\r\nconst emptyCells = new RoleSet(gameMatrix);\r\n\r\n// Define a function keeping the record of marked cells (for\r\n// each type of marks)\r\nfunction keepState(cell, filledCells) {\r\n  const cellN = gameMatrix.indexOf(cell);\r\n  return [...filledCells, cellN].sort((a, b) => a - b);\r\n}\r\n\r\n// Define two empty RoleSet's for X and O\r\nconst xAndOs = turns.map((turn, i) => {\r\n  const set = new RoleSet();\r\n  // Define action for the event when a new element is being\r\n  // added to RoleSet\r\n  setActionOnAddElement(\r\n    set,\r\n    (() => {\r\n      // Keep the record of marked cells in closure\r\n      let filledCells = [];\r\n      return ({ target, roleSet }) => {\r\n        // Reset the record when the first element is added\r\n        if (roleSet.size === 1) {\r\n          filledCells = [];\r\n        }\r\n\r\n        // Mark the cell\r\n        target[turn]();\r\n\r\n        // Add the cell to the record\r\n        filledCells = keepState(target, filledCells);\r\n\r\n        // Check if the state of win exists\r\n        const possibleWin = analyzePossibleWin(filledCells);\r\n\r\n        // If analyzePossibleWin returns an array of cells\r\n        // set them the win state\r\n        if (possibleWin) {\r\n          emptyCells.clearElements();\r\n          xAndOs.clearElements();\r\n          possibleWin.forEach((n) => {\r\n            gameMatrix[n].markAsWin();\r\n          });\r\n\r\n          // Post the message saying who wins\r\n          postTextMessage(winMessages[i]);\r\n\r\n          // otherwise check if all cells are marked\r\n        } else if (emptyCells.size === 0) {\r\n          // Clear elements from the both sets and post the\r\n          // message that the game is over\r\n          xAndOs.clearElements();\r\n          postTextMessage(gameOverMessage);\r\n        }\r\n      };\r\n    })(),\r\n  );\r\n\r\n  // Define the action for the event of 'click' type\r\n  eventChain({\r\n    roleSet: set,\r\n    type: 'click',\r\n    action() {\r\n      // Post the message that the cell is occupied\r\n      postTextMessage(cellMarkedMessage);\r\n    },\r\n  });\r\n\r\n  return set;\r\n});\r\n\r\n// Add the method that clear both (X and O) RoleSets\r\nxAndOs.clearElements = function () {\r\n  this.forEach(set => set.clearElements());\r\n};\r\n\r\n// Define the function that sets the state of a cell and\r\n// returns the next turn (for X or O)\r\nfunction setCell(currentTurn, cell) {\r\n  xAndOs[currentTurn].addElement(cell);\r\n  return 1 - currentTurn;\r\n}\r\n\r\n// Define the action for the event of 'click' type\r\neventChain({\r\n  roleSet: emptyCells,\r\n  type: 'click',\r\n  action: ((firstTurn) => {\r\n    // Store the current turn in closure\r\n    let currentTurn = firstTurn;\r\n    return ({ target, roleSet }) => {\r\n      // Check if the game has just begun and reset the\r\n      // first turn\r\n      if (roleSet.size === 9) {\r\n        currentTurn = firstTurn;\r\n      }\r\n      currentTurn = setCell(currentTurn, target);\r\n    };\r\n  })(0),\r\n});\r\n\r\n// Define the action that restarts the game\r\nrestartButton.onclick = () => {\r\n  // Reset all cells\r\n  gameMatrix.forEach(cell => cell.resetCell());\r\n\r\n  // and add them to the initial RoleSet\r\n  emptyCells.addElements(gameMatrix);\r\n};\r\n","export default function analyzePossibleWin(filledCells) {\r\n  const winPatterns = [\r\n    [0, 1, 2],\r\n    [3, 4, 5],\r\n    [6, 7, 8],\r\n    [0, 3, 6],\r\n    [1, 4, 7],\r\n    [2, 5, 8],\r\n    [0, 4, 8],\r\n    [2, 4, 6],\r\n  ];\r\n  for (const pattern of winPatterns) {\r\n    let winCells = [];\r\n    for (const cellN of pattern) {\r\n      if (filledCells.includes(cellN)) {\r\n        winCells.push(cellN);\r\n      } else {\r\n        winCells = [];\r\n        break;\r\n      }\r\n    }\r\n    if (winCells.length > 0) {\r\n      return winCells;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n","import React from 'react';\r\nimport ticTacToe from 'tic-tac-toe';\r\n\r\nexport default class TicTacToe extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.myRef = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    ticTacToe(this.myRef.current);\r\n  }\r\n\r\n  render() {\r\n    return <div ref={this.myRef} />;\r\n  }\r\n}\r\n","/* eslint-env browser */\r\nimport { matrixContainer } from './matrix';\r\nimport { messageContainer } from './messages';\r\nimport restartButton from './restartButton';\r\n\r\nexport default function createStage(placeholder) {\r\n  const stageStyle = { 'line-height': '0', 'box-sizing': 'content-box' };\r\n  const stage = document.createElement('div');\r\n  Object.assign(stage.style, stageStyle);\r\n\r\n  stage.appendChild(matrixContainer);\r\n  stage.appendChild(messageContainer);\r\n  stage.appendChild(restartButton);\r\n\r\n  placeholder.parentNode.replaceChild(stage, placeholder);\r\n\r\n  return stage;\r\n}\r\n","import React from 'react';\r\nimport TicTacTot from '../components/TicTacToe';\r\n\r\nconst IndexPage = () => <TicTacTot />;\r\n\r\nexport default IndexPage;\r\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","exports.f = require('./_wks');\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n","require('./_wks-define')('asyncIterator');\n","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n"],"sourceRoot":""}